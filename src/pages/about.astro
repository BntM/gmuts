---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import { getCollection, render } from 'astro:content';

const pages = await getCollection('pages');
const aboutPage = pages.find(page => page.id === 'about');

let Content;
if (aboutPage) {
  const rendered = await render(aboutPage);
  Content = rendered.Content;
}
---

<BaseLayout
  title={aboutPage ? `${aboutPage.data.title} - GMUTS` : "About - GMUTS"}
  description={aboutPage?.data.description || "Learn more about GMUTS"}
>
  <Hero
    title={aboutPage?.data.title || "About Us"}
    subtitle={aboutPage?.data.description || "Learn more about what we do"}
  />

  <section class="about-content">
    {Content ? <Content /> : (
      <p>Welcome to GMUTS! This site is built with Astro and uses Decap CMS for content management.</p>
    )}
  </section>
</BaseLayout>

<style>
  .about-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 4rem 1rem;
    line-height: 1.8;
  }

  .about-content :global(p) {
    font-size: 1.125rem;
    color: #555;
  }
</style>
